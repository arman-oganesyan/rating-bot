const BaseCommand = require('./base_command').BaseCommand;

module.exports.HelpCommand = class HelpCommand extends BaseCommand {
    constructor(app) {
        super('help', app);
    }

    canHandle(message) {
        return this._isCommand(message, 'help');
    }

    async handle(message) {

        try {
            this._l.info(`Handle command help in chat ${message.chat.id}`);

            const command_prefix = this._isGroupMessage(message) ? `@${this._app._me.username}` : '';

            const help = `<b>–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω —ç—Ç–æ—Ç –±–æ—Ç?</b>

–ë–æ—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –≥—Ä—É–ø–ø. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º —Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫–∏ –∏ –¥–∏–∑–ª–∞–π–∫–∏ –Ω–∞ —á—É–∂–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ –≤–µ–¥–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º –≤ –≥—Ä—É–ø–ø–µ, –∞ –∏–º–µ–Ω–Ω–æ: –∫—Ç–æ –∏ —Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞–ø–∏—Å–∞–ª. –≠—Ç—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞ –¥–µ–Ω—å, –º–µ—Å—è—Ü –∏–ª–∏ –≤–æ–æ–±—â–µ –∑–∞ –≤—Å—ë –≤—Ä–µ–º—è.

<b>–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è?</b>

–ü—Ä–æ—Å—Ç–æ –æ—Ç–≤–µ—á–∞–π—Ç–µ –Ω–∞ —á—É–∂–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –ï—Å–ª–∏ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å '+' –∏–ª–∏ 'üëç' - –∫ —Ä–µ–π—Ç–∏–Ω–≥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –æ–¥–Ω–æ –æ—á–∫–æ, –∞ –µ—Å–ª–∏ —Å '-' –∏–ª–∏ 'üëé' - —Ç–æ —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±—É–¥–µ—Ç —É–º–µ–Ω—å—à–µ–Ω –Ω–∞ –æ–¥–Ω–æ –æ—á–∫–æ.

–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –∑–∞ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ —á–∞—â–µ, —á–µ–º —Ä–∞–∑ –≤ 60 —Å–µ–∫—É–Ω–¥.

<b>–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã</b>

/help${command_prefix} - –≤—ã–≤–æ–¥ —ç—Ç–æ–π —Å–ø—Ä–∞–≤–∫–∏
/show${command_prefix} - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞—à —Ä–µ–π—Ç–∏–Ω–≥. –ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–µ
/stat${command_prefix} - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —á–∞—Ç–∞ –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ —á–∞—â–µ, —á–µ–º —Ä–∞–∑ –≤ 48 —á–∞—Å–æ–≤
        `;

            this._app._bot.sendMessage(message.chat.id, help, { parse_mode: "HTML" });
        }
        catch (err) {
            this._l.error('Failed to handle! Error was: ', err);
        }

        return true;
    }
}